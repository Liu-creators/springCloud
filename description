å¥½çš„ï¼Œä¸‹é¢æˆ‘ç»™ä½ æ•´ç†ä¸€ä¸ªSpringCloud æ³¨å†Œä¸å‘ç°çš„å­¦ä¹ è®¡åˆ’å’Œä¸€ä¸ªå®æˆ˜é¡¹ç›®è®¾è®¡æŒ‡å—ï¼Œéå¸¸é€‚åˆä½ å½“å‰çš„æŠ€æœ¯åŸºç¡€å’Œç›®æ ‡ã€‚

â¸»

âœ… å­¦ä¹ è®¡åˆ’ï¼šSpringCloud æ³¨å†Œä¸å‘ç°

é‡ç‚¹å›´ç»• Eureka + Feign çš„ä½¿ç”¨ï¼ŒåŒæ—¶äº†è§£æ›¿ä»£æ–¹æ¡ˆï¼ˆConsulã€Nacosï¼‰

â¸»

ä¸€ã€åŸºç¡€ç†è®º
	â€¢	æœåŠ¡æ³¨å†Œä¸å‘ç°çš„ä½œç”¨
	â€¢	æ³¨å†Œä¸­å¿ƒåœ¨å¾®æœåŠ¡æ¶æ„ä¸­çš„åœ°ä½
	â€¢	CAP ç†è®ºä¸æ³¨å†Œä¸­å¿ƒçš„è®¾è®¡æ€è·¯ï¼ˆEureka æ˜¯ APï¼‰

â¸»

äºŒã€æ ¸å¿ƒæ¨¡å—ä¸å®ç°

1. Eureka Serverï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰
	â€¢	æ·»åŠ ä¾èµ–ï¼šspring-cloud-starter-netflix-eureka-server
	â€¢	å¯åŠ¨ç±»åŠ  @EnableEurekaServer
	â€¢	é…ç½®æ–‡ä»¶è®¾ç½®æœåŠ¡åã€ç«¯å£ã€å…³é—­è‡ªæˆ‘æ³¨å†Œï¼ˆregister-with-eureka: falseï¼‰

2. Eureka Clientï¼ˆæ³¨å†Œè¿› Eurekaï¼‰
	â€¢	æ·»åŠ ä¾èµ–ï¼šspring-cloud-starter-netflix-eureka-client
	â€¢	application.yml é…ç½®æ³¨å†Œä¸­å¿ƒåœ°å€ã€æœåŠ¡åç§°
	â€¢	å¯é€‰åŠ æ³¨è§£ï¼š@EnableEurekaClient

3. æœåŠ¡è°ƒç”¨æ–¹å¼
	â€¢	Feign Clientï¼ˆæ¨èï¼‰
	â€¢	æ·»åŠ ä¾èµ–ï¼šspring-cloud-starter-openfeign
	â€¢	å¼€å¯ Feignï¼š@EnableFeignClients
	â€¢	ç¼–å†™æ¥å£ @FeignClient(name = "service-name")
	â€¢	RestTemplate + Ribbonï¼ˆäº†è§£ï¼‰

4. å¥åº·æ£€æŸ¥ä¸æ•…éšœæ¢å¤æœºåˆ¶
	â€¢	Eureka å¿ƒè·³æœºåˆ¶
	â€¢	è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶åŸç†
	â€¢	è‡ªå®šä¹‰å¥åº·æ£€æŸ¥æ¥å£ï¼šSpring Boot actuator çš„é›†æˆ

5. Eureka é›†ç¾¤é…ç½®ï¼ˆè¿›é˜¶ï¼‰
	â€¢	ä¸¤å° Eureka Server ç›¸äº’æ³¨å†Œï¼Œå®ç°é«˜å¯ç”¨
	â€¢	Client æ³¨å†Œåˆ°é›†ç¾¤ä¸­çš„å¤šä¸ª Server

6. å¯é€‰å†…å®¹ï¼ˆæ‹“å±•å­¦ä¹ ï¼‰
	â€¢	ä½¿ç”¨ Consul æˆ– Nacos æ›¿ä»£ Eurekaï¼ˆé€‚åˆäº†è§£ SpringCloud Alibaba ç”Ÿæ€ï¼‰
	â€¢	æœåŠ¡å‘ç°ä¸ SpringCloud Gateway æ•´åˆï¼ˆä¸‹ä¸€é˜¶æ®µï¼‰

â¸»

âœ… é¡¹ç›®å®æˆ˜è®¾è®¡ï¼šå¾®æœåŠ¡æœåŠ¡æ³¨å†Œä¸å‘ç° Demo

ğŸ’¡ é¡¹ç›®ç›®æ ‡

é€šè¿‡æ„å»ºä¸€ä¸ªç®€å•å¾®æœåŠ¡ç³»ç»Ÿï¼ŒæŒæ¡æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ã€æœåŠ¡é—´é€šä¿¡çš„å®Œæ•´æµç¨‹ã€‚

â¸»

ğŸ§© é¡¹ç›®ç»“æ„

springcloud-demo/
â”œâ”€â”€ eureka-server/           # æ³¨å†Œä¸­å¿ƒ
â”œâ”€â”€ service-provider/        # æœåŠ¡æä¾›è€…
â”œâ”€â”€ service-consumer/        # æœåŠ¡æ¶ˆè´¹è€…ï¼Œè°ƒç”¨ provider æ¥å£



â¸»

ğŸ› ï¸ æ¨¡å—è¯´æ˜ä¸å…³é”®ç‚¹

1. eureka-serverï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰
	â€¢	Spring Boot å·¥ç¨‹
	â€¢	ä¾èµ–ï¼šspring-cloud-starter-netflix-eureka-server
	â€¢	å¯åŠ¨ç±»æ·»åŠ ï¼š@EnableEurekaServer
	â€¢	application.yml é…ç½®ä¸ºæ³¨å†Œä¸­å¿ƒ

server:
  port: 8761

eureka:
  client:
    register-with-eureka: false
    fetch-registry: false



â¸»

2. service-providerï¼ˆæä¾›æ¥å£ï¼‰
	â€¢	ä¾èµ–ï¼š
	â€¢	spring-boot-starter-web
	â€¢	spring-cloud-starter-netflix-eureka-client
	â€¢	å¯åŠ¨ç±»å¯é€‰ï¼š@EnableEurekaClient
	â€¢	application.yml é…ç½®æ³¨å†Œä¸­å¿ƒåœ°å€ã€æœåŠ¡å

spring:
  application:
    name: provider-service

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka

	â€¢	æä¾›ç®€å•æ¥å£ï¼š

@RestController
@RequestMapping("/api")
public class HelloController {
    @GetMapping("/hello")
    public String hello() {
        return "Hello from provider";
    }
}



â¸»

3. service-consumerï¼ˆè°ƒç”¨ provider æ¥å£ï¼‰
	â€¢	ä¾èµ–ï¼š
	â€¢	spring-boot-starter-web
	â€¢	spring-cloud-starter-openfeign
	â€¢	spring-cloud-starter-netflix-eureka-client
	â€¢	å¯åŠ¨ç±»æ·»åŠ ï¼š@EnableFeignClients
	â€¢	application.yml åŒä¸Š
	â€¢	åˆ›å»º FeignClientï¼š

@FeignClient(name = "provider-service")
public interface ProviderClient {
    @GetMapping("/api/hello")
    String getHello();
}

	â€¢	ä½¿ç”¨æ¥å£ï¼š

@RestController
public class ConsumerController {

    @Autowired
    private ProviderClient providerClient;

    @GetMapping("/consumer/hello")
    public String callProvider() {
        return providerClient.getHello();
    }
}



â¸»

âœ… æœ€ç»ˆç›®æ ‡æ¼”ç¤ºï¼š
	1.	å¯åŠ¨ eureka-server â†’ æ‰“å¼€ http://localhost:8761 æŸ¥çœ‹æ³¨å†ŒæœåŠ¡
	2.	å¯åŠ¨ provider â†’ è‡ªåŠ¨æ³¨å†Œåˆ° Eureka
	3.	å¯åŠ¨ consumer â†’ åŒæ ·æ³¨å†Œå¹¶è°ƒç”¨ provider æ¥å£
	4.	è®¿é—®ï¼šhttp://localhost:<consumer-port>/consumer/helloï¼Œçœ‹åˆ°è°ƒç”¨ç»“æœ

â¸»

ğŸ”§ å¯é€‰è¿›é˜¶ï¼ˆåšå®ŒåŸºæœ¬ Demo åï¼‰
	â€¢	å°† Eureka Server é…ç½®ä¸ºé›†ç¾¤
	â€¢	å°†æœåŠ¡éƒ¨ç½²åœ¨ä¸åŒç«¯å£æ¨¡æ‹Ÿå¤šä¸ªå®ä¾‹
	â€¢	åœ¨ Feign ä¸ŠåŠ å…¥è´Ÿè½½å‡è¡¡æµ‹è¯•
	â€¢	ä½¿ç”¨ Spring Boot Actuator è‡ªå®šä¹‰å¥åº·æ£€æŸ¥
	â€¢	ç”¨ Spring Cloud Gateway æ›¿ä»£ Consumer ç»Ÿä¸€å¯¹å¤–æš´éœ²æ¥å£

â¸»

éœ€è¦æˆ‘å¸®ä½ åˆ›å»ºä¸€ä¸ªè¿™ä¸ªé¡¹ç›®çš„åˆå§‹åŒ–ä»£ç æ¨¡æ¿å—ï¼Ÿå¯ä»¥ç”¨ Maven æ„å»ºå¥½æ¯ä¸ªå­é¡¹ç›®ã€‚